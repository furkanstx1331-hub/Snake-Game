<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Snake Ultimate</title>

<style>
body{
    margin:0;
    background:#0a0a0a;
    font-family:Arial;
    color:white;
    display:flex;
    flex-direction:column;
    align-items:center;
}

h1{
    color:#00ffee;
    text-shadow:0 0 20px #00ffee;
}

canvas{
    background:#000;
    border:3px solid #00ffee;
    box-shadow:0 0 30px #00ffee;
}

.menu{
    margin:20px;
}

button{
    padding:10px 20px;
    margin:5px;
    background:#00ffee;
    border:none;
    cursor:pointer;
    font-weight:bold;
    border-radius:8px;
}
</style>
</head>
<body>

<h1>üêç Snake Ultimate</h1>

<div class="menu" id="menu">
<button onclick="startGame('single')">Tek Oyuncu</button>
<button onclick="startGame('multi')">2 Oyuncu</button>
<button onclick="startGame('ai')">Yapay Zeka</button>
</div>

<canvas id="game" width="500" height="500" style="display:none;"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const box = 20;

let snakes = [];
let directions = [];
let food;
let bombs=[];
let powerups=[];
let game;
let speed=120;
let paused=false;
let mode="single";

function randomPos(){
    return Math.floor(Math.random()*25)*box;
}

function startGame(selectedMode){
    mode=selectedMode;
    document.getElementById("menu").style.display="none";
    canvas.style.display="block";

    snakes=[];
    directions=[];
    bombs=[];
    powerups=[];
    speed=120;

    snakes.push([{x:200,y:200}]);
    directions.push("RIGHT");

    if(mode!=="single"){
        snakes.push([{x:100,y:100}]);
        directions.push("RIGHT");
    }

    food={x:randomPos(),y:randomPos()};
    game=setInterval(draw,speed);
}

document.addEventListener("keydown",e=>{
    if(e.key==="p") paused=!paused;

    if(e.key==="ArrowLeft" && directions[0]!=="RIGHT") directions[0]="LEFT";
    if(e.key==="ArrowUp" && directions[0]!=="DOWN") directions[0]="UP";
    if(e.key==="ArrowRight" && directions[0]!=="LEFT") directions[0]="RIGHT";
    if(e.key==="ArrowDown" && directions[0]!=="UP") directions[0]="DOWN";

    if(mode==="multi"){
        if(e.key==="a" && directions[1]!=="RIGHT") directions[1]="LEFT";
        if(e.key==="w" && directions[1]!=="DOWN") directions[1]="UP";
        if(e.key==="d" && directions[1]!=="LEFT") directions[1]="RIGHT";
        if(e.key==="s" && directions[1]!=="UP") directions[1]="DOWN";
    }
});

function draw(){
    if(paused) return;

    ctx.fillStyle="#000";
    ctx.fillRect(0,0,500,500);

    ctx.fillStyle="red";
    ctx.fillRect(food.x,food.y,box,box);

    bombs.forEach(b=>{
        ctx.fillStyle="orange";
        ctx.fillRect(b.x,b.y,box,box);
    });

    snakes.forEach((snake,index)=>{
        moveSnake(snake,index);
        snake.forEach(part=>{
            ctx.fillStyle=index===0?"#00ffee":"#ff00ff";
            ctx.shadowBlur=15;
            ctx.shadowColor=index===0?"#00ffee":"#ff00ff";
            ctx.fillRect(part.x,part.y,box,box);
        });
    });

    if(Math.random()<0.01) bombs.push({x:randomPos(),y:randomPos()});
}

function moveSnake(snake,index){
    let headX=snake[0].x;
    let headY=snake[0].y;

    if(mode==="ai" && index===1){
        if(headX<food.x) headX+=box;
        else if(headX>food.x) headX-=box;
        else if(headY<food.y) headY+=box;
        else if(headY>food.y) headY-=box;
    }else{
        if(directions[index]==="LEFT") headX-=box;
        if(directions[index]==="RIGHT") headX+=box;
        if(directions[index]==="UP") headY-=box;
        if(directions[index]==="DOWN") headY+=box;
    }

    if(headX<0||headY<0||headX>=500||headY>=500||collision(headX,headY,snake)){
        clearInterval(game);
        alert("Oyun Bitti!");
        location.reload();
    }

    if(headX===food.x && headY===food.y){
        food={x:randomPos(),y:randomPos()};
        speed-=2;
        clearInterval(game);
        game=setInterval(draw,speed);
    }else{
        snake.pop();
    }

    bombs.forEach(b=>{
        if(headX===b.x && headY===b.y){
            clearInterval(game);
            alert("Bombaya √áarptƒ±n!");
            location.reload();
        }
    });

    snake.unshift({x:headX,y:headY});
}

function collision(x,y,snake){
    return snake.some(part=>part.x===x && part.y===y);
}
</script>

</body>
</html>
